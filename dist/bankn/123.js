"use strict";(self.webpackChunkbankn=self.webpackChunkbankn||[]).push([[123],{3123:(b,O,i)=>{i.r(O),i.d(O,{AccountModule:()=>I});var _=i(2382),l=i(9808),u=i(8086),M=i(2795),e=i(1223),g=i(1930),A=i(9876);function E(t,c){if(1&t&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&t){const n=c.$implicit,o=e.oxw();e.Q6J("selected",n.alpha2==o.form.value.referenceCountry)("value",n.alpha2),e.xp6(1),e.AsE("",n.name," - ",n.currencies[0],"")}}function U(t,c){if(1&t){const n=e.EpF();e.TgZ(0,"a",37),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return r.onDelete(r.form.value.id)}),e.SDv(1,38),e.qZA()}}let f=(()=>{class t{constructor(n,o,r,s,T,N){this.banknService=n,this.accountService=o,this.formBuilder=r,this.route=s,this.router=T,this.location=N,this.form=new _.cw({id:new _.NI(null),name:new _.NI,referenceAmount:new _.NI,referenceCountry:new _.NI,referenceDay:new _.NI,referenceMonth:new _.NI,referenceYear:new _.NI,description:new _.NI})}ngOnInit(){this.countries=this.banknService.getCountries(),this.route.paramMap.subscribe(n=>{var o=n.get("accountId");if(null==o||0==o.trim().length)this.form.setValue({id:null,name:"Main",referenceAmount:0,referenceCountry:this.banknService.getReferenceCountry(),referenceDay:"1",referenceMonth:"1",referenceYear:"2000",description:""});else{var r=this.accountService.getAccount(o);null!=r&&this.form.setValue({id:r.id,name:r.name,referenceAmount:r.referenceAmount.toUnit(),referenceCountry:r.referenceCountry,referenceDay:r.referenceDate.getDate(),referenceMonth:r.referenceDate.getMonth()+1,referenceYear:r.referenceDate.getFullYear(),description:r.description})}})}onSubmit(){var n=this.banknService.getCurrencyOfCountry(this.form.controls.referenceCountry.value),o=M.m.toDinero(n,this.form.controls.referenceAmount.value),r=new Date(0);r.setFullYear(this.form.controls.referenceYear.value,this.form.controls.referenceMonth.value-1,this.form.controls.referenceDay.value),null==this.form.controls.id.value?this.accountService.createAccount(this.form.controls.name.value,this.form.controls.description.value,r,this.form.controls.referenceCountry.value,o):this.accountService.updateAccount(this.form.controls.id.value,this.form.controls.name.value,this.form.controls.description.value,o,r,this.form.controls.referenceCountry.value),this.form.reset(),this.router.navigate([""])}onDelete(n){this.accountService.deleteAccountId(n),this.location.back()}onCancel(){this.location.back()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g.D),e.Y36(A.B),e.Y36(_.qu),e.Y36(u.gz),e.Y36(u.F0),e.Y36(l.Ye))},t.\u0275cmp=e.Xpm({type:t,selectors:[["account"]],decls:53,vars:5,consts:function(){let c,n,o,r,s,T,N,S,d,m;return c=$localize`Name`,n=$localize`Reference Value`,o=$localize`Reference Date`,r=$localize`Day`,s=$localize`Month`,T=$localize`Year`,N=$localize` Description `,S=$localize`${"\ufffd0\ufffd"}:INTERPOLATION:`,d=$localize`Cancel`,m=$localize`Delete`,[[3,"formGroup","ngSubmit"],[1,"container"],[1,"row"],[1,"col-sm-6","form-group"],["for","name"],c,["id","name","type","text","formControlName","name",1,"form-control"],[1,"col-sm-12","form-group"],n,[1,"col-sm-2","form-group"],["title","referenceAmount","id","referenceAmount","type","text","formControlName","referenceAmount",1,"form-control"],["id","referenceAmountHelpBlock",1,"form-text","text-muted"],[1,"col-sm-4","form-group"],["title","referenceCountry","formControlName","referenceCountry",1,"form-control"],[3,"selected","value",4,"ngFor","ngForOf"],["id","referenceCountryHelpBlock",1,"form-text","text-muted"],o,[1,"col-xl-1","col-md-2","col-4","form-group"],["title","referenceDay","id","referenceDay","type","text","formControlName","referenceDay",1,"form-control"],["id","referenceDayHelpBlock",1,"form-text","text-muted"],r,["title","referenceMonth","id","referenceMonth","type","text","formControlName","referenceMonth",1,"form-control"],["id","referenceMonthHelpBlock",1,"form-text","text-muted"],s,["title","referenceYear","id","referenceYear","type","text","formControlName","referenceYear",1,"form-control"],["id","referenceYearHelpBlock",1,"form-text","text-muted"],T,[1,"col-sm-6","col-12","form-group"],["for","description"],N,["id","description","formControlName","description",1,"form-control"],["type","submit",1,"btn","btn-primary"],S,["class","btn btn-danger text-white","role","button",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],d,[3,"selected","value"],["role","button",1,"btn","btn-danger","text-white",3,"click"],m]},template:function(n,o){1&n&&(e.TgZ(0,"h2"),e._uU(1),e.qZA(),e._UZ(2,"br"),e.TgZ(3,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"label",4),e.SDv(8,5),e.qZA(),e._UZ(9,"input",6),e.qZA()(),e.TgZ(10,"div",2)(11,"div",7)(12,"label"),e.SDv(13,8),e.qZA()()(),e.TgZ(14,"div",2)(15,"div",9),e._UZ(16,"input",10),e.TgZ(17,"small",11),e._uU(18,"Value"),e.qZA()(),e.TgZ(19,"div",12)(20,"select",13),e.YNc(21,E,2,4,"option",14),e.qZA(),e.TgZ(22,"small",15),e._uU(23,"Currency"),e.qZA()()(),e.TgZ(24,"div",2)(25,"div",7)(26,"label"),e.SDv(27,16),e.qZA()()(),e.TgZ(28,"div",2)(29,"div",17),e._UZ(30,"input",18),e.TgZ(31,"small",19),e.SDv(32,20),e.qZA()(),e.TgZ(33,"div",17),e._UZ(34,"input",21),e.TgZ(35,"small",22),e.SDv(36,23),e.qZA()(),e.TgZ(37,"div",17),e._UZ(38,"input",24),e.TgZ(39,"small",25),e.SDv(40,26),e.qZA()()(),e.TgZ(41,"div",2)(42,"div",27)(43,"label",28),e.SDv(44,29),e.qZA(),e._UZ(45,"textarea",30),e.qZA()()(),e.TgZ(46,"button",31),e.SDv(47,32),e.qZA(),e._uU(48," \xa0 "),e.YNc(49,U,2,0,"a",33),e._uU(50," \xa0 "),e.TgZ(51,"button",34),e.NdJ("click",function(){return o.onCancel()}),e.SDv(52,35),e.qZA()()),2&n&&(e.xp6(1),e.Oqu(null==o.form.value.id?"Create Account":"Edit Account"),e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(18),e.Q6J("ngForOf",o.countries),e.xp6(26),e.pQV(null==o.form.value.id?"Create":"Ok"),e.QtT(47),e.xp6(2),e.Q6J("ngIf",null!=o.form.value.id))},directives:[_._Y,_.JL,_.sg,_.Fj,_.JJ,_.u,_.EJ,l.sg,_.YN,_.Kr,l.O5],styles:[""]}),t})();var p=i(106),P=i(5177);function v(t,c){1&t&&(e.TgZ(0,"div",0)(1,"div",8),e._UZ(2,"account-create-card"),e.qZA()())}const a=function(t){return["/accounts/account",t]},L=function(t){return["/transactions/",t]};function h(t,c){if(1&t&&(e.TgZ(0,"tr")(1,"th",14),e._uU(2),e.qZA(),e.TgZ(3,"td",15),e._uU(4),e.qZA(),e.TgZ(5,"td",16)(6,"button",17),e.SDv(7,18),e.qZA(),e._uU(8,"\xa0"),e.TgZ(9,"button",19),e.SDv(10,20),e.qZA()()()),2&t){const n=c.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(6,a,n.id)),e.xp6(1),e.Oqu(n.name),e.xp6(1),e.Q6J("routerLink",e.VKq(8,a,n.id)),e.xp6(1),e.Oqu(n.description),e.xp6(2),e.Q6J("routerLink",e.VKq(10,a,n.id)),e.xp6(3),e.Q6J("routerLink",e.VKq(12,L,n.id))}}function D(t,c){if(1&t&&(e.TgZ(0,"table",9)(1,"thead")(2,"tr")(3,"th",10),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",11),e._uU(6,"Description"),e.qZA(),e._UZ(7,"th",12),e.qZA()(),e.TgZ(8,"tbody"),e.YNc(9,h,11,14,"tr",13),e.qZA()()),2&t){const n=e.oxw();e.xp6(9),e.Q6J("ngForOf",n.accounts)}}const Z=function(){return["/accounts/account"]},$=[{path:"",component:(()=>{class t{constructor(n,o){this.eventsService=n,this.accountService=o,this.accounts=[]}ngOnInit(){this.refreshAccounts(),this.eventsService.accountsChange.subscribe(()=>{this.refreshAccounts()})}refreshAccounts(){this.accounts=this.accountService.getAccounts()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(p.n),e.Y36(A.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["account-list"]],decls:11,vars:4,consts:function(){let c,n,o;return c=$localize`Accounts`,n=$localize`Edit`,o=$localize`Txns`,[[1,"row"],[1,"col-6"],c,[1,"col-6","text-right"],["type","submit",1,"btn","btn-secondary",3,"routerLink"],["class","row",4,"ngIf"],[1,"table-responsive"],["class","table table-sm",4,"ngIf"],[1,"col-sm-5"],[1,"table","table-sm"],["scope","col",1,""],["scope","col",1,"d-none","d-sm-block"],["scope","col",1,"text-right"],[4,"ngFor","ngForOf"],["scope","row",3,"routerLink"],[1,"d-none","d-sm-block",3,"routerLink"],[1,"text-right"],[1,"btn","btn-primary",3,"routerLink"],n,[1,"btn","btn-secondary",3,"routerLink"],o]},template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e.SDv(3,2),e.qZA()(),e.TgZ(4,"div",3)(5,"button",4),e._uU(6,"New"),e.qZA()()(),e._UZ(7,"br"),e.YNc(8,v,3,0,"div",5),e.TgZ(9,"div",6),e.YNc(10,D,10,1,"table",7),e.qZA()),2&n&&(e.xp6(5),e.Q6J("routerLink",e.DdM(3,Z)),e.xp6(3),e.Q6J("ngIf",0==o.accounts.length),e.xp6(2),e.Q6J("ngIf",o.accounts.length>0))},directives:[u.rH,l.O5,P.x,l.sg],styles:[""]}),t})()},{path:"account",component:f},{path:"account/:accountId",component:f}];let y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.Bz.forChild($)],u.Bz]}),t})();var R=i(2271);let I=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,_.u5,_.UX,y,R.m]]}),t})()}}]);